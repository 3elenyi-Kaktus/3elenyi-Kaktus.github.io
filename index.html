<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Persistent Queue</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="main.js"></script>
    <link rel="stylesheet" href="styles/styles.css">
    <link rel="icon" type="image/x-icon" href="content/favicon.ico">
</head>
<body>
    <div id="side_bar" class="side_bar">
        <span class="close_button" onclick="CloseSideBar()">&times;</span>

        <div class="side_bar_container">
            <label id="locale_switcher_label" class="side_bar_text" for="locale_switcher">Select locale:</label>
            <select id="locale_switcher" class="option_switcher" name="locale_switcher" autocomplete="off">
                <option value="en" class="opt" selected>English</option>
                <option value="ru" class="opt">Русский</option>
            </select>
        </div>

        <div class="side_bar_container" style="display: none">
            <label id="configuration_switcher_label" class="side_bar_text" for="configuration_switcher">Select configuration:</label>
            <select id="configuration_switcher" class="option_switcher" name="configuration_switcher" autocomplete="off">
                <option value="1" class="opt" selected>None</option>
                <option value="2" class="opt">Pop from 1-element queue</option>
                <option value="3" class="opt">Pop from 2-element queue</option>
                <option value="4" class="opt">Pop from ordinary queue</option>
                <option value="5" class="opt">Dynamic list creation</option>
                <option value="6" class="opt">Auxiliary lists swap</option>
            </select>
        </div>

        <button id="debug_button" class="menu_button" onclick="Debug();CloseSideBar();">Debug</button>

        <button id="update_layout_button" class="menu_button" onclick="UpdateLayout();CloseSideBar();">Update Layout</button>

        <button id="instruction_button" class="menu_button" onclick="InstructionToggler();CloseSideBar();">Instruction</button>
    </div>

    <div class="container_flex">
        <div class="side_bar_open_button" onclick="OpenSideBar()">
            <div class="bar1"></div>
            <div class="bar2"></div>
            <div class="bar3"></div>
        </div>
        <div class="versions_container">
            <svg id="versions_svg" class="versions_svg"></svg>
        </div>
    </div>





    <div class="main_dynamic_container">
            <svg id="main_svg" class="main_svg"></svg><!--
         --><svg id="secondary_svg" class="secondary_svg"></svg>
    </div>


    <form id="push_form" class="push_form" onsubmit="return false">
        <label id="push_version_label" for="push_version" style="font-size: 17px">Push new element to specific version:</label>
        <input type="text" id="push_version" class="push_version" name="push_version" size="3">
        <button id="push_button" class="ordinary_button" onclick="Push()">Push</button>
    </form>

    <form id="pop_form" class="pop_form" onsubmit="return false">
        <label id="pop_version_label" for="pop_version" style="font-size: 17px">Pop last element from specific version:</label>
        <input type="text" id="pop_version" class="pop_version" name="pop_version" size="3">
        <button id="pop_button" class="ordinary_button" onclick="Pop()">Pop</button>
    </form>

    <div id="step_by_step_container" class="step_by_step_container">
        <input type="checkbox" id="step_by_step_toggle_checkbox" class="step_by_step_toggle_checkbox" name="step_by_step_toggle_checkbox" autocomplete="off">
        <label id="step_by_step_toggle_checkbox_label" for="step_by_step_toggle_checkbox" style="font-size: 17px">Activate Step-by-Step</label>
    </div>

    <button id="previous_step_button" onclick="PreviousStep()" class="ordinary_button" hidden="hidden">Previous step</button>

    <button id="next_step_button" onclick="NextStep()" class="ordinary_button" hidden="hidden">Next step</button>

    <div id="help_text_container" class="help_text_container" hidden="hidden">
        <div id="help_text" class="help_text"></div>
    </div>

    <div id="instruction_block" class="instruction_block">
        <div id="instruction_text">
            <h1>Инструкция</h1>
            <p class="instruction_paragraph">
                Данный визуализатор представляет собой один из вариантов реализации структуры данных "Персистентная очередь".<br>
                Основная концепция алгоритма - построение на двух деревьях.<br>
                Одно из них представляет саму очередь, второе является вспомогательным для совершения различных операций над ней.
            </p>
            <h1>Интерфейс приложения</h1>
            <p class="instruction_paragraph">
                Перед началом работы настоятельно советуется прочитать техническое описание алгоритма, для понимания его составных частей.
            </p>
            <h2>1. Меню</h2>
            <p class="instruction_paragraph">
                Здесь можно изменить язык, просмотреть различные конфигурации и тд.
            </p>
            <h4 class="instruction_topic">1.1 Перестроить граф</h4>
            <p class="instruction_paragraph">
                Если в процессе работы граф потерял структурированность (вершины перекрывают друг друга, надписи смешиваются), то эта опция повторно запустит перестройку графа.
            </p>
            <h2>2. Основной интерфейс</h2>
            <h4 class="instruction_topic">2.1 Строка Версий</h4>
            <p class="instruction_paragraph">
                В верхней части расположена строка с объектами Версий.<br>
                При наведении на нее будет выведена техническая информация.<br>
                При нажатии на Версию будут выделены соответствующая ей очередь, а также ее вспомогательные списки.
            </p>
            <h4 class="instruction_topic">2.2 Главный граф.</h4>
            <p class="instruction_paragraph">
                В левой части расположен основной граф - сама очередь.<br>
                При наведении на ее элементы будет выведена техническая информация.
            </p>
            <h4 class="instruction_topic">2.3 Вспомогательный граф</h4>
            <p class="instruction_paragraph">
                Справа расположено дерево вспомогательныых списков.
                При наведении на его элементы будет выведена техническая информация.
            </p>
            <h4 class="instruction_topic">2.4 Добавление/Удаление вершин из очереди</h4>
            <p class="instruction_paragraph">
                Чтобы добавить в конец или удалить первую вершину из определенной версии очереди, введите номер искомой версии в соответствующее поле и нажмите кнопку.
            </p>
            <h4 class="instruction_topic">2.5 Пошаговая визуализация</h4>
            <p class="instruction_paragraph">
                Если вы хотите, чтобы весь процесс добавления/удаления происходил пошагово и наглядно - отметьте поле Пошаговая визуализация.
            </p>
        </div>
    </div>

    <script>
        Setup();
    </script>

    <div id="overlay" class="overlay" onclick="InstructionToggler()"></div>

    <div id="version_node_popup" class="popup">
        <div id="v_n_p_heading">Version pointers:</div>
        <div class="popup_line"><span id="v_n_p_head_txt">Head:</span><span class="popup_circle" style="background-color: green"></span><span id="head_id"></span></div>
        <div class="popup_line"><span id="v_n_p_tail_txt">Tail:</span><span class="popup_circle" style="background-color: red"></span><span id="tail_id"></span></div>
        <div class="popup_line"><span id="v_n_p_dynamic_txt">Dynamic:</span><span class="popup_circle" style="background-color: yellow"></span><span id="dynamic_id"></span></div>
        <div class="popup_line"><span id="v_n_p_operational_txt">Operational:</span><span class="popup_circle" style="background-color: aqua"></span><span id="operational_id"></span></div>
    </div>

    <div id="dynamic_node_popup" class="popup">
        <div id="d_n_p_heading">Node pointers:</div>
        <div class="popup_line"><span id="d_n_p_son_txt">Son:</span><span class="popup_circle" style="background-color: gray"></span><span id="dynamic_node_son_id"></span></div>
        <div class="popup_line"><span id="d_n_p_target_txt">Target node:</span><span class="popup_circle" style="background-color: gray"></span><span id="dynamic_node_target_id"></span></div>
    </div>

    <div id="main_node_popup" class="popup">
        <div id="m_n_p_heading">Node pointers:</div>
        <div class="popup_line"><span id="m_n_p_son_txt">Son:</span><span class="popup_circle" style="background-color: gray"></span><span id="main_node_son_id"></span></div>
    </div>

    <img id="banan" class="banan" src='content/banan_enhanced.gif' alt="">

    <svg style="position: absolute; top: 0; left: 0; height: 0; width: 0">
        <defs>
            <marker display="marker"
                    id="arrow"
                    viewBox="0 0 200 320"
                    refX="0"
                    refY="160"
                    markerWidth="5"
                    markerHeight="5"
                    orient="auto-start-reverse"
                    stroke="black">
                    <polyline points="0 0, 200 160, 0 320"></polyline>
            </marker>
        </defs>
    </svg>
</body>
</html>